# =========================================================
# Base44 • Master .env (organized, complete)
# End goal: full automation with guardrails
# =========================================================

# ===== Core time/locale =====

# ===== Relay (Flask) =====

# External/public URL for bots to reach the relay (ngrok etc.)
# Local base, if some tools call the relay directly on localhost

# ===== Relay security / CORS =====

# ===== Dashboard (read-only) =====

# ===== Executor-to-relay (legacy; new code uses RELAY_URL/RELAY_TOKEN) =====

# ===== Bybit credentials / environment =====

# ===== Ngrok (or tunnel) =====
# NGROK_DOMAIN=

# ===== Telegram notifications =====
# Optional broadcast list if you support multiple recipients

# =========================================================
# AUTOMATION LAYER (gate, signals, guard, executor)
# =========================================================

# ----- Regime / session gate (shared) -----
# Trading windows (24h local), comma-separated
# Whitelist symbols; blank = all

# ----- Signal Advisor (scanner-only) -----

# ----- Portfolio Guard (Risk Daemon Lite) -----
# Per-trade risk as PERCENT of equity (e.g., 0.20 = 0.20%)
# Halt for the day if drawdown from session start exceeds this percent
# Concurrency & concentration

# ----- Semi-auto Executor (breakout-impulse) -----
# Entry behavior

# If you want different scan symbols for the executor than the advisor:
# Re-use signal thresholds by default; override below if needed:
# MIN_ADX / MIN_ATR_PCT / MAX_ATR_PCT inherit from above unless overridden
# Execution throttle

# =========================================================
# EXISTING BOTS (TP/SL Manager, PnL Logger, etc.)
# =========================================================

# ----- TP/SL Manager -----
# Optional orderLinkId prefix you “own”
# TP_TAG_PREFIX=B44

# ----- PnL Logger / Rollup -----

# ----- Coach / misc -----

# ----- Proxy safety (off by default) -----

# =========================================================
# LEGACY / OBSOLETE KEYS (kept for backward compat)
# Toggle these off or delete once all code paths migrate.
# =========================================================
# Observe-only signal engine (legacy)

# Old risk daemon knobs (superseded by Portfolio Guard)

# Legacy symbol gates for old modules

# Old executor toggles (prefer new DRY_RUN/ENTRY_MODE/etc.)

# ----- Reconciler -----




# Optional scoping

# ----- Decision logging -----

# ----- Account policy -----
TZ=America/Phoenix
RELAY_HOST=127.0.0.1
RELAY_PORT=5000
LOG_LEVEL=INFO
RELAY_URL=https://YOUR-NGROK-SUBDOMAIN.ngrok-free.dev
RELAY_BASE=http://127.0.0.1:5000
RELAY_TOKEN=vmj6xRxoaWdt7CdbqQa+Wd//LBCfd/XFTyCGba1yptfE=
RELAY_SECRET=0c5aff4b45534bd8bbc6319fc5f4d6083d43eca68d8549e590d72f44ab26737b
RELAY_CORS_ALLOW=http://localhost:3000,https://YOUR-NGROK-SUBDOMAIN.ngrok-free.dev
DASHBOARD_RELAY_BASE=https://YOUR-NGROK-SUBDOMAIN.ngrok-free.dev
EXECUTOR_RELAY_BASE=http://127.0.0.1:5000
EXECUTOR_RELAY_TOKEN=vmj6xRxoaWdt7CdbqQa+Wd//LBCfd/XFTyCGba1yptfE=
BYBIT_API_KEY=EpLWxg5fP3NaQs6FvN
BYBIT_API_SECRET=3aXTTQPDFVLaW1plfCwMJBxCyp2GHbv2lW9q
BYBIT_BASE=https://api.bybit.com
BYBIT_ACCOUNT_TYPE=unified
BYBIT_NETWORK=mainnet
NGROK_AUTHTOKEN=34ntn4NGQUJc5VG9MODKLnYvKe6_6J4CkxFQnGo6cNqgLguYP
TELEGRAM_BOT_TOKEN=8594421731:AAF2DyHne-gf6qtn4G5I75IidctceJ53A2Q
TELEGRAM_CHAT_ID=7776809236
TELEGRAM_CHAT_IDS=
SUB_UIDS=152304954,152499802,260417078,302355261,65986592,65986659
REGIME_MIN_ADX=18
REGIME_MIN_ATR_PCT=0.6
REGIME_MAX_ATR_PCT=5.0
TRADING_WINDOWS=05:30-10:00,12:00-15:30
SYMBOL_WHITELIST=BTCUSDT,ETHUSDT,FARTCOINUSDT,HBARUSDT,PUMPFUNUSDT
SYMBOL_SCAN_LIST=BTCUSDT,ETHUSDT,FARTCOINUSDT,HBARUSDT,PUMPFUNUSDT
SIGNAL_INTERVAL=5
SIGNAL_LOOKBACK=200
BO_LOOKBACK=20
MIN_VOL_Z=1.5
MIN_ADX=20
MIN_ATR_PCT=0.6
MAX_ATR_PCT=5.0
COOLDOWN_MIN=20
BASE_ASSET=USDT
RISK_PCT=0.20
DAILY_LOSS_CAP_PCT=1.0
MAX_CONCURRENT=2
MAX_SYMBOL_TRADES=1
GUARD_STATE_FILE=./registry/guard_state.json
ENTRY_MODE=LIMIT_PULLBACK        # LIMIT_PULLBACK | LIMIT_BREAK | MARKET
PULLBACK_BPS=40                  # 0.40% below break
POST_ONLY=1                      # maker-only when limit
LEVERAGE=20
SAFE_MODE=1                      # place SL; forbid flatten ops
DRY_RUN=1                        # simulate until proven safe
EXEC_SYMBOLS=BTCUSDT,ETHUSDT,HBARUSDT
LOOKBACK=200
EXEC_COOLDOWN_SEC=300
TP_ADOPT_EXISTING=true
TP_CANCEL_NON_B44=false
TP_DRY_RUN=false
TP_STARTUP_GRACE_SEC=20
TP_MANAGED_TAG=B44
TP_WS_DISABLE=true
TP_PERIODIC_SWEEP_SEC=6
TP_SYMBOL_WHITELIST=
PNL_EQUITY_COIN=USDT
PNL_SUB_UIDS=152304954,152499802,260417078,302355261,65986592,65986659
PNL_SNAPSHOT_HHMM=00:01
PNL_REPORT_HHMM=23:59
PNL_POLL_SEC=1800
PNL_SEND_HOURLY=true
PNL_SEND_DAILY=true
PNL_DAILY_SEND_HOUR=23
MAIN_SUB_UID=
VEHICLE_SUB_UID=
START_DATE=2025-11-01
COACH_POLL_SEC=60
PROXY_ENABLE=false
HTTP_PROXY=
HTTPS_PROXY=
OBSERVE_ONLY=true
OBSERVE_TEST_SIGNAL=true
OBSERVE_APPEND=false
RISK_POLL_SEC=30
RISK_MAX_DD_PCT=3.0
RISK_AUTOFIX=false
RISK_AUTOFIX_DRY_RUN=true
RISK_CLOSE_ON_VIOLATION=false
RISK_NOTIFY_EVERY_MIN=10
ENFORCE_WHITELIST=false
SIG_ENABLED=true
SIG_TIMEFRAMES=5,15
SIG_BIAS_TF=60
SIG_SYMBOLS=BTCUSDT,ETHUSDT
SIG_POLL_SEC=30
SIG_ADX_LEN=14
SIG_ATR_LEN=14
SIG_VOL_Z_WIN=60
SIG_MIN_ADX=18
SIG_MIN_ATR_PCT=0.25
SIG_NOTIFY_COOLDOWN_SEC=300
SIG_SEND_CHART_LINKS=false
SIG_DRY_RUN=true
SIG_HEARTBEAT_MIN=10
LIVE=false
EXEC_ENABLED=true
EXEC_DRY_RUN=true
EXEC_TIMEFRAMES=5,15
EXEC_BIAS_TF=60
EXEC_POLL_SEC=20
EXEC_MIN_ADX=18
EXEC_MIN_ATR_PCT=0.25
EXEC_VOLZ_MIN=0.8
EXEC_POSTONLY_TICKS=2
EXEC_MAX_LEVERAGE=50
EXEC_RISK_PCT=0.15
EXEC_EQUITY_COIN=USDT
EXEC_TRADING_START=00:00
EXEC_TRADING_END=23:59
EXEC_ALLOW_SHORTS=true
RECON_ENABLED=true
RECON_DRY_RUN=true
RECON_SAFE_MODE=true
RECON_POLL_SEC=8
RECON_TAG_PREFIX=B44
RECON_ADOPT_EXISTING=true
RECON_CANCEL_STRAYS=false
RECON_RUNG_COUNT=50
RECON_QTY_MODE=equal           # equal | linear | frontload
RECON_QTY_MIN_FRACTION=0.004
RECON_POST_ONLY=true
RECON_PRICE_TOL_BPS=6
RECON_GRID_MODE=ATR            # ATR | FIXED
RECON_ATR_LEN=14
RECON_ATR_MULT=3.0
RECON_FIXED_STEP_BPS=35
RECON_SL_OFFSET_BPS=180
RECON_SL_TRIGGER=MARKPRICE     # or LASTPRICE
RECON_INCLUDE_LONGS=true
RECON_INCLUDE_SHORTS=true
RECON_SYMBOL_WHITELIST=
DECISION_LOG_DIR=./logs/decisions
DECISION_LOG_FORMATS=jsonl,parquet     # supports jsonl, parquet (needs pyarrow or fastparquet)
DECISION_LOG_FLUSH_SEC=2               # batch flush frequency
DECISION_LOG_ROTATE_DAYS=7             # keep last N days (jsonl untouched; parquet folder pruned)
ACCOUNT_POLICY_FILE=./registry/account_policy.json
